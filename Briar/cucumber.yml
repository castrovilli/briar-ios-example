<%
date = Time.now.strftime('%Y-%m-%d-%H%M-%S')
default_report = "./reports/calabash-#{date}.html"

lesspainful_dir = "#{ENV['HOME']}/.lesspainful"

pluto_dir = "#{lesspainful_dir}/devices/pluto"
pluto_ip = IO.read("#{pluto_dir}/ip") if File.exists?("#{pluto_dir}/ip")
pluto_udid = IO.read("#{pluto_dir}/udid") if File.exists?("#{pluto_dir}/udid")
pluto_report = "./reports/pluto/pluto-#{date}.html"

neptune_dir = "#{lesspainful_dir}/devices/neptune"
neptune_ip = IO.read("#{neptune_dir}/ip") if File.exists?("#{neptune_dir}/ip")
neptune_udid = IO.read("#{neptune_dir}/udid") if File.exists?("#{neptune_dir}/udid")
neptune_report = "./reports/neptune/neptune-#{date}.html"

%>



common: BUNDLE_ID=com.littlejoysoftware.Briar-cal SCREENSHOT_PATH=./screenshots/ -f 'Slowhandcuke::Formatter' --tags ~@issues
os5: OS=ios5
os6: OS=ios6
os7: OS=ios7
rerun_out: -f rerun -o ./rerun/rerun.txt
pluto_rr: -f rerun -o ./rerun/pluto/rerun.txt
neptune_rr: -f rerun -o ./rerun/neptune/rerun.txt
pluto_html:   -f html -o <%= pluto_report %>
neptune_html: -f html -o <%= neptune_report %>  
html_report:  -f html -o <%= default_report %>
no_launch: NO_LAUNCH=1 --tags ~@launch
do_launch: NO_LAUNCH=0 --tags ~@no_launch
no_reset_btw: RESET_BETWEEN_SCENARIOS=0
reset_btw: RESET_BETWEEN_SCENARIOS=1
full_output: CALABASH_FULL_CONSOLE_OUTPUT=1

ipad: DEVICE=ipad -p common
iphone: DEVICE=iphone -p common

# UIAutomation through Instruments
uai_simulator: DEVICE_TARGET=simulator

default: -p common -p rerun_out -p html_report -p no_launch -p uai_simulator -p os6 -p reset_btw -p full_output
launch:  -p common -p rerun_out -p html_report -p do_launch -p uai_simulator -p os6 -p reset_btw -p full_output

issues: -p no_launch -p rerun_out -p html_report SCREENSHOT_PATH=./screenshots/ -f 'Slowhandcuke::Formatter' OS=ios5 --tags @issues

pluto:   DEVICE_ENDPOINT=<%= pluto_ip %>   -p pluto_rr   -p ipad   -p pluto_html   -p os5 -p no_launch
neptune: DEVICE_TARGET=<%= neptune_udid %> DEVICE_ENDPOINT=<%= neptune_ip %> -p neptune_rr -p iphone -p neptune_html -p os6

# not really working in Ruby Mine
wip:     -p common -p rerun_out -p html_report -p no_launch --tags @wip:3 --wip

# not yet - does not work in Ruby Mine
# rerun:   -p common -p no_launch @rerun.txt
