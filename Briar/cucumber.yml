<%
date = Time.now.strftime('%Y-%m-%d-%H%M-%S')
default_report = "./reports/calabash-#{date}.html"
pluto_ip = IO.read("#{ENV['HOME']}/.lesspainful/devices/pluto")
pluto_report = "./reports/pluto/pluto-#{date}.html"
neptune_ip = IO.read("#{ENV['HOME']}/.lesspainful/devices/neptune")
neptune_report = "./reports/neptune/neptune-#{date}.html"
%>


common: SCREENSHOT_PATH=./screenshots/ -f 'Slowhandcuke::Formatter' --tags ~@issues
os5: OS=ios5
os6: OS=ios6
os7: OS=ios7
rerun_out: -f rerun -o ./rerun/rerun.txt
pluto_rr: -f rerun -o ./rerun/pluto/rerun.txt
neptune_rr: -f rerun -o ./rerun/neptune/rerun.txt
pluto_html:   -f html -o <%= pluto_report %>
neptune_html: -f html -o <%= neptune_report %>  
html_report:  -f html -o <%= default_report %>
no_launch: EMBED=1 NO_LAUNCH=1 --tags ~@launch
ipad: DEVICE=ipad -p common -p no_launch --tags ~@launch
iphone: DEVICE=iphone -p common -p no_launch --tags ~@launch

# UIAutomation through Instruments
uai_simulator: DEVICE_TARGET=simulator

default: -p common -p rerun_out -p html_report -p no_launch -p uai_simulator -p os7
launch:  -p common -p rerun_out -p html_report -p uai

issues: -p no_launch -p rerun_out -p html_report SCREENSHOT_PATH=./screenshots/ -f 'Slowhandcuke::Formatter' OS=ios5 --tags @issues

pluto:   -p pluto_rr   -p ipad   -p pluto_html   DEVICE_ENDPOINT=<%= pluto_ip %>
neptune: -p neptune_rr -p iphone -p neptune_html DEVICE_ENDPOINT=<%= neptune_ip %>

# not really working in Ruby Mine
wip:     -p common -p rerun_out -p html_report -p no_launch --tags @wip:3 --wip

# not yet - does not work in Ruby Mine
# rerun:   -p common -p no_launch @rerun.txt
